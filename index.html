<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vesper's Hollow: Chapter I</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="game-wrapper">
    <canvas id="canvas"></canvas>

    <!-- CHARACTER CREATION -->
    <div id="screen-creation" class="fullscreen-overlay">
        <div class="creation-container">
            <div class="creation-left">
                <h1>Vesper's Hollow</h1>
                <p>Chapter I: The Crossing</p>
                
                <div style="margin-bottom: 20px;">
                    <label style="display:block; color: var(--accent-gold); margin-bottom: 5px;">True Name</label>
                    <input type="text" id="inp-name" value="Guest" style="width: 100%; padding: 10px; background: #111; border: 1px solid #444; color: white;">
                </div>

                <label style="display:block; color: var(--accent-gold); margin-bottom: 10px;">Select Lineage</label>
                
                <div class="race-btn selected" onclick="selectLineage('Umbra')">
                    <span class="race-icon">ü¶á</span>
                    <div>
                        <div style="font-weight:bold;">Umbra</div>
                        <div style="font-size: 12px;">Vampiric Heritage</div>
                    </div>
                </div>
                <div class="race-btn" onclick="selectLineage('Lycoris')">
                    <span class="race-icon">üê∫</span>
                    <div>
                        <div style="font-weight:bold;">Lycoris</div>
                        <div style="font-size: 12px;">Shifter Heritage</div>
                    </div>
                </div>
                <div class="race-btn" onclick="selectLineage('Sirenia')">
                    <span class="race-icon">üßú‚Äç‚ôÄÔ∏è</span>
                    <div>
                        <div style="font-weight:bold;">Sirenia</div>
                        <div style="font-size: 12px;">Aquatic Heritage</div>
                    </div>
                </div>
                <div class="race-btn" onclick="selectLineage('Oracle')">
                    <span class="race-icon">üëÅÔ∏è</span>
                    <div>
                        <div style="font-weight:bold;">Oracle</div>
                        <div style="font-size: 12px;">Psychic Heritage</div>
                    </div>
                </div>
                <div class="race-btn" onclick="selectLineage('Bound')">
                    <span class="race-icon">‚õìÔ∏è</span>
                    <div>
                        <div style="font-weight:bold;">Bound</div>
                        <div style="font-size: 12px;">Reanimated Heritage</div>
                    </div>
                </div>
            </div>

            <div class="creation-right">
                <h3 id="lore-title" style="color: var(--accent-gold); font-family: var(--font-header);">The Umbra</h3>
                <div id="lore-preview">
                    Aristocratic and timeless. The Umbra feed on energy and blood, though the Academy provides substitutes. 
                    <br><br>
                    <strong>Passive:</strong> Night Vision + Diplomacy<br>
                    <strong>Ability:</strong> <em>Sanguine Step</em> (Teleport)
                </div>
                <button class="start-btn" onclick="startGame()">Enter The Mist</button>
            </div>
        </div>
    </div>

    <!-- MAIN UI -->
    <div id="ui-layer" class="hidden">
        
        <!-- Top HUD -->
        <div class="hud-top">
            <div class="party-frames" id="party-frames">
                <!-- Generated via JS -->
            </div>
            <div style="text-align: right;">
                <div style="font-family: var(--font-header); color: #888; font-size: 14px;">LOCATION</div>
                <div style="font-family: var(--font-header); color: var(--accent-gold); font-size: 24px;" id="location-text">The Ferry Docks</div>
                <div style="margin-top:10px;">
                    <button onclick="Storage.saveGame()" style="background:#333; border:1px solid #555; color:#ccc; cursor:pointer; padding:5px;">Save</button>
                    <button onclick="Storage.loadGame()" style="background:#333; border:1px solid #555; color:#ccc; cursor:pointer; padding:5px;">Load</button>
                </div>
            </div>
        </div>

        <!-- Combat Log -->
        <div id="combat-log"></div>

        <!-- Dialogue Box -->
        <div id="dialogue-box">
            <div class="speaker-name" id="diag-speaker">Charon</div>
            <div class="dialogue-text" id="diag-text">...</div>
            <div class="dialogue-options" id="diag-options">
                <!-- Options JS -->
            </div>
        </div>

        <!-- Inventory Modal -->
        <div id="inventory-modal" style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width:400px; background:var(--ui-bg); border:2px solid var(--accent-gold); padding:20px; pointer-events:auto;">
            <h2 style="font-family:var(--font-header); color:var(--accent-gold); margin-top:0;">Inventory</h2>
            <div id="inventory-content" style="max-height:300px; overflow-y:auto;"></div>
            <button onclick="InventoryUI.toggle()" style="margin-top:10px; padding:5px 10px; background:#333; border:none; color:#fff; cursor:pointer;">Close</button>
        </div>

        <!-- Action Bar -->
        <div class="action-bar">
            <div class="skill-btn active" id="btn-move" onclick="Engine.setMode('move')">
                üë£ <div class="key-hint">1</div>
            </div>
            <div class="skill-btn" id="btn-attack" onclick="Engine.setMode('attack')">
                ‚öîÔ∏è <div class="key-hint">2</div>
            </div>
            <div class="skill-btn" id="btn-skill1">
                <!-- Content populated by UI.js -->
            </div>
            <div class="skill-btn" onclick="InventoryUI.toggle(Game.party[Game.playerIdx])">
                üéí <div class="key-hint">I</div>
            </div>
            <div class="skill-btn" id="btn-endturn" onclick="Combat.endTurn()">
                ‚è≥ <div class="key-hint">Sp</div>
            </div>
        </div>
    </div>
</div>

<script src="src/data.js"></script>
<script src="src/inventory.js"></script>
<script src="src/game.js"></script>
<script src="src/storage.js"></script>
<script src="src/pathfinding.js"></script>
<script src="src/ui.js"></script>
<script src="src/vfx.js"></script>
<script src="src/dialogue.js"></script>
<script src="src/gameloop.js"></script>
<script src="src/combat.js"></script>
<script src="src/engine.js"></script>
<script src="src/main.js"></script>

</body>
</html>
